# é˜¶æ®µ2: è§†è§‰æ•ˆæœæ¢å¤

**ä¼˜å…ˆçº§**: ğŸŸ  P1 High  
**é¢„è®¡è€—æ—¶**: 3å°æ—¶  
**ç›®æ ‡**: æ¢å¤ V1.5.5 ç‰ˆæœ¬çš„ç»å…¸è§†è§‰æ•ˆæœï¼ˆæœ±ç ‚çº¢åˆ†éš”çº¿ã€èƒŒæ™¯é€è‰²æœºåˆ¶ï¼‰ã€‚

---

## ä»»åŠ¡æ¸…å•

### 2.1 æ¢å¤æœ±ç ‚çº¢åˆ†éš”çº¿ (2å°æ—¶)
**ç›®æ ‡**: å®ç°"èƒŒæ™¯é€è‰²"æœºåˆ¶ï¼Œå³ç”»å¸ƒèƒŒæ™¯ä¸ºçº¢è‰²ï¼Œæ ¼å­èƒŒæ™¯ä¸ºçº¸è‰²ï¼Œé€šè¿‡ gap é€å‡ºçº¢çº¿ã€‚

**ä¿®æ”¹æ–‡ä»¶**:

**1ï¸âƒ£ `src/components/PaperCanvas.vue`**
ä¿®æ”¹å®¹å™¨æ ·å¼ç»‘å®šï¼š
```vue
<div 
  ref="containerRef"
  class="..."
  :style="{
    // å½“ borderMode ä¸æ˜¯ none æ—¶ï¼ŒèƒŒæ™¯è®¾ä¸ºæœ±ç ‚çº¢
    backgroundColor: layoutConfig.borderMode !== 'none' 
      ? 'var(--color-cinnabar)' 
      : 'var(--color-paper)',
    // ...å…¶ä»–æ ·å¼
  }"
>
```
*æ³¨*: éœ€è¦ç¡®ä¿ CSS å˜é‡ `--color-cinnabar` å·²å®šä¹‰ï¼ˆå‚è€ƒ `src/assets/main.css` æˆ– `styles.css`ï¼‰ã€‚

**2ï¸âƒ£ `src/components/CharacterCell.vue`**
ç»™æ ¼å­æ·»åŠ ä¸é€æ˜èƒŒæ™¯ï¼Œé®ç›–åº•å±‚çº¢è‰²ï¼š
```vue
<div 
  class="character-cell ..."
  :style="{
    // å§‹ç»ˆä½¿ç”¨çº¸è‰²èƒŒæ™¯
    backgroundColor: 'var(--color-paper)',
    // ...
  }"
>
```

**3ï¸âƒ£ `src/utils/layoutEngine/strategies/gridStrategy.ts`**
åœ¨åæ ‡è®¡ç®—ä¸­åº”ç”¨ gapï¼š
```typescript
// åœ¨ calculateGridLayout ä¸­
const { gap = 3, gridSize, ... } = config;
const cellWithGap = gridSize + gap;

// è®¡ç®—åæ ‡æ—¶ä½¿ç”¨ cellWithGap
items.push({
  // ...
  x: paddingLeft + col * cellWithGap,
  y: paddingTop + row * cellWithGap,
  // å®½é«˜ä¿æŒ gridSize (96)ï¼Œä¸åŒ…å« gap
  width: gridSize,
  height: gridSize,
});
```

---

### 2.2 å¤„ç† borderMode='lines-only' (1å°æ—¶)
**ç›®æ ‡**: å®ç°"ä»…åˆ†éš”çº¿"æ¨¡å¼ï¼Œéšè—å­—æ ¼å†…éƒ¨ SVGï¼Œåªä¿ç•™çº¢è‰²ç¼éš™ã€‚

**ä¿®æ”¹æ–‡ä»¶**:

**1ï¸âƒ£ `src/components/CharacterCell.vue`**
æ‰©å±• props å¹¶ä¿®æ”¹ `showGrid` é€»è¾‘ï¼š

```typescript
// Props å®šä¹‰
interface Props {
  // ...
  borderMode?: 'full' | 'lines-only' | 'none';
}

const props = withDefaults(defineProps<Props>(), {
  borderMode: 'full',
  // ...
});

// è®¡ç®—å±æ€§
const showGrid = computed(() => {
  // åªæœ‰åœ¨ full æ¨¡å¼ä¸” gridType æœ‰å€¼æ—¶æ‰æ˜¾ç¤º SVG ç½‘æ ¼
  return props.borderMode === 'full' && props.gridType !== 'none';
});
```
*æ³¨æ„*: ç¡®ä¿æ¨¡æ¿ä¸­çš„ SVG å…ƒç´ ä½¿ç”¨ `v-if="showGrid"` æ§åˆ¶ã€‚

**2ï¸âƒ£ `src/components/PaperCanvas.vue`**
ä¼ é€’ propsï¼š
```vue
<CharacterCell
  v-for="item in visibleItems"
  :border-mode="layoutConfig.borderMode"
  :show-grid="layoutConfig.borderMode === 'full'"
  ...
/>
```

---

## âœ… éªŒè¯æ ‡å‡†

1.  **åˆ†éš”çº¿æ•ˆæœ**:
    - `borderMode='full'`: æ˜¾ç¤º SVG å­—æ ¼ + çº¢è‰²åˆ†éš”çº¿ã€‚
    - `borderMode='lines-only'`: **ä¸æ˜¾ç¤º** SVG å­—æ ¼ï¼Œä½†åœ¨å­—ä¹‹é—´æœ‰æ¸…æ™°çš„çº¢è‰²åˆ†éš”çº¿ (3px)ã€‚
    - `borderMode='none'`: æ— åˆ†éš”çº¿ï¼Œæ— å­—æ ¼ï¼Œå­—ä¹‹é—´ç´§å¯†æ’åˆ— (gap=0)ã€‚
2.  **è§†è§‰å±‚çº§**: æ–‡å­—åœ¨æœ€ä¸Šå±‚ï¼Œæ ¼å­èƒŒæ™¯åœ¨ä¸­é—´ï¼Œçº¢è‰²çº¿æ¡åœ¨æœ€åº•å±‚ã€‚
